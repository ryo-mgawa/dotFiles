import { Injectable } from '@nestjs/common';
import { ShipmentDAO } from '../dao/shipmentDAO';
import { ShipmentRepositoryInput } from './types/shipmentRepositoryTypes';

@Injectable()
export class ShipmentRepository {
  constructor(private readonly shipmentDAO: ShipmentDAO) { }

  public async save(
    organizationId: string,
    shipments: ShipmentRepositoryInput[]
  ): Promise<void> {
    const shipmentsWithOrganizationId = shipments.map((shipment) => ({
      ...shipment,
      organizationId,
    }));

    await this.shipmentDAO.save(shipmentsWithOrganizationId);
  }
}
