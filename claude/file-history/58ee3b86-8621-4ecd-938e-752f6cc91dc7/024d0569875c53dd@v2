import type { ISiteRepository } from '@/infrastructure/database/repositories/index.js';
import type { GetSitesResponseDto } from '../dto/SiteDto.js';

export class GetSitesUseCase {
  constructor(private siteRepository: ISiteRepository) {}

  async execute(companyId: string): Promise<GetSitesResponseDto> {
    const sites = await this.siteRepository.findByCompanyId(companyId);

    return {
      sites: sites.map((site) => ({
        id: site.id,
        name: site.name,
        displayOrder: site.displayOrder,
      })),
    };
  }
}
