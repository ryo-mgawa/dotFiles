import { ShipmentInsert } from '@app/rdb/db/model';
import { Injectable } from '@nestjs/common';
import { ShipmentDAO } from '../dao';
import { Shipment } from '../model/shipment';

@Injectable()
export class ShipmentRepository {
  constructor(
    private readonly shipmentDAO: ShipmentDAO
  ) { }

  public async save(shipments: ShipmentInsert[]): Promise<string[]> {
    await this.shipmentDAO.save(shipments);
    return shipments.map((shipment) => shipment.id);
  }

  public async getShipments(
    organizationId: string,
    limit: number,
    offset: number
  ): Promise<Shipment[]> {
    return this.shipmentDAO.getShipments(organizationId, limit, offset);
  }
}
