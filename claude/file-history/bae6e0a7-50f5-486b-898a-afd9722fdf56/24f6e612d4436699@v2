import { Inject, Injectable } from '@nestjs/common';
import { ShipmentRepository } from '../../data/repository/shipmentRepository';
import { GetShipmentsPresenterInterface } from '../../interface/presenter/getShipmentsPresenterInterface';
import { Input } from '../types/getShipmentsTypes';

@Injectable()
export class GetShipmentsUseCase {
  constructor(
    @Inject('GetShipmentsPresenter')
    private readonly presenter: GetShipmentsPresenterInterface,
    private readonly shipmentRepository: ShipmentRepository,
  ) { }

  public async execute(input: Input, organizationId: string): Promise<void> {
    const shipments = await this.shipmentRepository.get({
      organizationId,
      sinceId: input.sinceId,
      count: input.count,
    });

    this.presenter.output(shipments);
  }
}
