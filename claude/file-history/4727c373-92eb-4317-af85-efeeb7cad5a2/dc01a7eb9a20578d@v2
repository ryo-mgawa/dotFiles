import type { Participant } from '@/entities';
import type { SiteOnlineStatus } from '../../types';
import { VideoGrid } from './VideoGrid';
import './SubVideoDisplay.scss';

/**
 * ビデオレンダリング関数の型
 */
interface VideoRenderer {
  renderVideo: (
    participantId: string,
    canvas: HTMLCanvasElement,
    width: number,
    height: number
  ) => Promise<void>;
  stopRenderVideo: (participantId: string, canvas: HTMLCanvasElement) => Promise<void>;
}

/**
 * SubVideoDisplay Props
 */
interface SubVideoDisplayProps {
  participants: Participant[];
  sites: SiteOnlineStatus[];
  mainSiteId: string | null;
  onSiteSelect: (siteId: string) => void;
  videoRenderer?: VideoRenderer;
}

/**
 * SubVideoDisplay
 * サブ映像エリアコンポーネント（画面下部20%）
 */
export const SubVideoDisplay = ({
  participants,
  sites,
  mainSiteId,
  onSiteSelect,
  videoRenderer,
}: SubVideoDisplayProps) => {
  return (
    <div className="sub-video-display">
      <VideoGrid
        participants={participants}
        sites={sites}
        mainSiteId={mainSiteId}
        onSiteSelect={onSiteSelect}
        videoRenderer={videoRenderer}
      />
    </div>
  );
};
