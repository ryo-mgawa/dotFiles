import { useContext } from 'react';
import { AuthContext } from '../context/AuthContext';

export const useAuth = () => {
  const context = useContext(AuthContext);

  if (!context) {
    throw new Error('useAuth must be used within an AuthProvider');
  }

  const { state, login, authenticateBySiteToken, logout, clearError } = context;

  return {
    // 状態
    isAuthenticated: state.isAuthenticated,
    authType: state.authType,
    user: state.user,
    site: state.site,
    company: state.company,
    zoomSessionName: state.zoomSessionName,
    zoomToken: state.zoomToken,
    loading: state.loading,
    error: state.error,
    // アクション
    login,
    authenticateBySiteToken,
    logout,
    clearError,
  };
};
