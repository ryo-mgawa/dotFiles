<<<<<<< HEAD
import { Injectable } from '@nestjs/common';
import { v7 as uuidv7 } from 'uuid';
import { ShipmentDAO } from '../dao/shipmentDAO';
import { ShipmentRepositoryInput } from './types/shipmentRepositoryTypes';

@Injectable()
export class ShipmentRepository {
  constructor(private readonly shipmentDAO: ShipmentDAO) { }

  public async save(
    organizationId: string,
    shipments: ShipmentRepositoryInput[]
  ): Promise<string[]> {
    const shipmentsWithId = shipments.map((shipment) => ({
      id: uuidv7(),
      organizationId,
      ...shipment,
    }));

    await this.shipmentDAO.save(shipmentsWithId);

    return shipmentsWithId.map((shipment) => shipment.id);
=======
import { ShipmentDAO } from '@app/rdb';
import { ShipmentInsert } from '@app/rdb/db/model';
import { Injectable } from '@nestjs/common';

@Injectable()
export class ShipmentRepository {
  constructor(
    private readonly shipmentDAO: ShipmentDAO
  ) { }

  public async save(shipments: ShipmentInsert[]): Promise<string[]> {
    await this.shipmentDAO.save(shipments);

    return shipments.map((shipment) => shipment.id);
>>>>>>> feature/#2921_shipment-add-api-application-layer
  }
}
