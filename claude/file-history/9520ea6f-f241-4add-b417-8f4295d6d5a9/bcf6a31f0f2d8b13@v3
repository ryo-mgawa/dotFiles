# è±Šç”°é«˜å°‚é™¸ä¸Šéƒ¨ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ å®Ÿè£…è¨ˆç”»æ›¸

## ğŸ“‹ å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- **é–‹å§‹æ—¥**: 2025-12-04
- **ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 å®Œäº†
- **é€²æ—**: 75% (Phase 0-3 å®Œäº†)

---

## ğŸ¯ å®Ÿè£…æ–¹é‡

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç§»è¡Œæˆ¦ç•¥
ç¾åœ¨ã¯DBç’°å¢ƒãŒæ•´ã£ã¦ã„ãªã„ãŸã‚ã€ä»¥ä¸‹ã®æˆ¦ç•¥ã§å®Ÿè£…ã‚’é€²ã‚ã¾ã™ï¼š

1. **Phase 1-3**: ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªï¼‰ã§å®Ÿè£…ãƒ»å‹•ä½œç¢ºèª âœ…
2. **Phase 4**: Supabaseç§»è¡Œï¼ˆenvãƒ•ã‚¡ã‚¤ãƒ«ã§æ¥ç¶šæƒ…å ±ç®¡ç†ï¼‰ ğŸ”œ

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³
- **Repository ãƒ‘ã‚¿ãƒ¼ãƒ³**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ã‚’æŠ½è±¡åŒ–ã—ã€ãƒ¢ãƒƒã‚¯â†’DBç§»è¡Œã‚’å®¹æ˜“ã«
- **Clean Architecture**: ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢ã«ã‚ˆã‚Šã€ã‚¤ãƒ³ãƒ•ãƒ©å±¤ã®å¤‰æ›´ãŒãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«å½±éŸ¿ã—ãªã„è¨­è¨ˆ

---

## ğŸ“… å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 0: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™ âœ…
**çŠ¶æ…‹**: å®Œäº†

#### ã‚¿ã‚¹ã‚¯
- [x] å®Ÿè£…è¨ˆç”»æ›¸ã®ä½œæˆï¼ˆæœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ä½œæˆï¼ˆfront/ã€server/ï¼‰
- [x] .gitignoreã®è¨­å®š

#### æˆæœç‰©
- `implementation_plan.md`
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

---

### Phase 1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰ âœ…
**çŠ¶æ…‹**: å®Œäº†

#### 1.1 ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] `server/package.json`ä½œæˆ
- [x] TypeScriptè¨­å®šï¼ˆ`tsconfig.json`ï¼‰
- [x] ESLintã€Prettierè¨­å®š
- [x] å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### 1.2 å…±é€šå®šæ•°ãƒ»å‹å®šç¾©
- [x] å­¦ç§‘å®šæ•°ï¼ˆDEPARTMENTSï¼‰
- [x] ãƒ–ãƒ­ãƒƒã‚¯å®šæ•°ï¼ˆBLOCKSï¼‰
- [x] ç¨®ç›®å®šæ•°ï¼ˆEVENTSï¼‰
- [x] å‹å®šç¾©ï¼ˆMember, Competition, Record, Advisor, Activityï¼‰

#### 1.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [x] AppErroråŸºåº•ã‚¯ãƒ©ã‚¹
- [x] NotFoundError, ValidationError, UnauthorizedError

#### 1.4 ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿å®Ÿè£…
- [x] ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿å®šç¾©ï¼ˆ`infrastructure/mock/data.ts`ï¼‰
  - Membersï¼ˆéƒ¨å“¡ï¼‰ãƒ‡ãƒ¼ã‚¿
  - Competitionsï¼ˆå¤§ä¼šï¼‰ãƒ‡ãƒ¼ã‚¿
  - Recordsï¼ˆè¨˜éŒ²ï¼‰ãƒ‡ãƒ¼ã‚¿
  - Advisorsï¼ˆé¡§å•ï¼‰ãƒ‡ãƒ¼ã‚¿
  - Activitiesï¼ˆæ´»å‹•æƒ…å ±ï¼‰ãƒ‡ãƒ¼ã‚¿

#### 1.5 Repositoryå®Ÿè£…
- [x] Repository Interfaceå®šç¾©ï¼ˆ`domain/repositories/`ï¼‰
- [x] Mock Repositoryå®Ÿè£…ï¼ˆ`infrastructure/mock/`ï¼‰
  - `MockMemberRepository.ts`
  - `MockCompetitionRepository.ts`
  - `MockRecordRepository.ts`
  - `MockAdvisorRepository.ts`
  - `MockActivityRepository.ts`

#### 1.6 DIè¨­å®š
- [x] `config/dependencies.ts`ä½œæˆ
- [x] ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ï¼ˆUSE_MOCKï¼‰
- [x] ãƒ¢ãƒƒã‚¯/Prismaåˆ‡ã‚Šæ›¿ãˆæº–å‚™

#### æˆæœç‰©
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤
- ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¨Mock Repository
- ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ç¢ºèª

---

### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIå®Ÿè£… âœ…
**çŠ¶æ…‹**: å®Œäº†

#### 2.1 Application Layerï¼ˆDTO & Use Casesï¼‰
- [x] DTOä½œæˆï¼ˆMemberDto, CompetitionDto, RecordDto, AdvisorDto, ActivityDtoï¼‰
- [x] ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆgradeCalculator.tsï¼‰
- [x] Members Use Cases
  - `GetMemberListUseCase.ts`ï¼ˆã‚½ãƒ¼ãƒˆå‡¦ç†å«ã‚€ï¼‰
- [x] Advisors Use Cases
  - `GetAdvisorListUseCase.ts`
- [x] Competitions Use Cases
  - `GetCompetitionsByYearUseCase.ts`
- [x] Activities Use Cases
  - `GetActivityListUseCase.ts`

#### 2.2 Interface Layerï¼ˆControllers & Routesï¼‰
- [x] Controllerså®Ÿè£…
  - `MembersController.ts`
  - `AdvisorsController.ts`
  - `CompetitionsController.ts`
  - `ActivitiesController.ts`
- [x] Routeså®Ÿè£…
  - `members.routes.ts`
  - `advisors.routes.ts`
  - `competitions.routes.ts`
  - `activities.routes.ts`
  - `index.ts`ï¼ˆçµ±åˆãƒ«ãƒ¼ãƒˆï¼‰
- [x] Middlewareså®Ÿè£…
  - `errorHandler.ts`
  - `cors.ts`

#### 2.3 ã‚µãƒ¼ãƒãƒ¼çµ±åˆ
- [x] APIãƒ«ãƒ¼ãƒˆã‚’server.tsã«çµ±åˆ
- [x] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### 2.4 å®Ÿè£…æ¸ˆã¿APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```
GET  /health                  # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
GET  /api/members             # åœ¨ç±ä¸­ã®éƒ¨å“¡ä¸€è¦§
GET  /api/advisors            # ç¾è·é¡§å•ä¸€è¦§
GET  /api/competitions        # å¤§ä¼šä¸€è¦§ï¼ˆ?year=2024ã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½ï¼‰
GET  /api/activities          # æ´»å‹•æ™‚é–“
```

#### æˆæœç‰©
- REST APIï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ï¼‰
- å‹•ä½œç¢ºèªå¯èƒ½ãªãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

---

### Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… âœ…
**çŠ¶æ…‹**: å®Œäº†

#### 3.1 ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] Vite + React 19 + TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [x] package.jsonä½œæˆ
- [x] TypeScriptè¨­å®š
- [x] Viteè¨­å®šï¼ˆãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã€ãƒ—ãƒ­ã‚­ã‚·ï¼‰
- [x] ESLintã€Prettierè¨­å®š
- [x] å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  - react-router v7
  - react-bootstrap 2.x
  - axios
  - bootstrap

#### 3.2 å‹å®šç¾©ã¨å®šæ•°
- [x] å‹å®šç¾©ï¼ˆMember, Advisor, Competition, Activityï¼‰
- [x] å®šæ•°å®šç¾©ï¼ˆDEPARTMENTS, ROUTESï¼‰

#### 3.3 APIé€šä¿¡è¨­å®š
- [x] `apiClient.ts` - Axiosè¨­å®š
- [x] å„APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…
  - `membersApi.ts`
  - `advisorsApi.ts`
  - `competitionsApi.ts`
  - `activitiesApi.ts`

#### 3.4 å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [x] `Header.tsx` - ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼
- [x] `LoadingSpinner.tsx` - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
- [x] `ErrorMessage.tsx` - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

#### 3.5 ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [x] `MemberTable.tsx` - éƒ¨å“¡ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«
- [x] `AdvisorList.tsx` - é¡§å•ä¸€è¦§
- [x] `CompetitionList.tsx` - å¤§ä¼šä¸€è¦§
- [x] `ActivitySchedule.tsx` - æ´»å‹•æ™‚é–“è¡¨

#### 3.6 ãƒšãƒ¼ã‚¸å®Ÿè£…
- [x] ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆHomePageï¼‰
  - æ´»å‹•æ™‚é–“è¡¨ç¤º
  - TwitteråŸ‹ã‚è¾¼ã¿äºˆå®šï¼ˆæº–å‚™ä¸­ï¼‰
- [x] éƒ¨å“¡åç°¿ãƒšãƒ¼ã‚¸ï¼ˆMembersPageï¼‰
  - éƒ¨å“¡ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«
  - ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½å®Ÿè£…æ¸ˆã¿
- [x] é¡§å•åç°¿ãƒšãƒ¼ã‚¸ï¼ˆAdvisorsPageï¼‰
  - é¡§å•ä¸€è¦§
- [x] å¤§ä¼šçµæœãƒšãƒ¼ã‚¸ï¼ˆCompetitionsPageï¼‰
  - å¹´åº¦é¸æŠãƒ•ã‚©ãƒ¼ãƒ 
  - å¤§ä¼šä¸€è¦§è¡¨ç¤º
- [ ] é™¸ä¸Šéƒ¨æ­´ä»£è¨˜éŒ²ãƒšãƒ¼ã‚¸ï¼ˆAllTimeRecordsPageï¼‰ - Phase 4ä»¥é™ã§å®Ÿè£…
- [ ] å€‹äººã®æ­´ä»£è¨˜éŒ²ãƒšãƒ¼ã‚¸ï¼ˆPersonalRecordsPageï¼‰ - Phase 4ä»¥é™ã€èªè¨¼æ©Ÿèƒ½ãŒå¿…è¦

#### 3.7 ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- [x] React Router v7è¨­å®š
- [x] å…¨ãƒšãƒ¼ã‚¸ã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### æˆæœç‰©
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¨é€£æº
- ä¸»è¦ãƒšãƒ¼ã‚¸å®Ÿè£…å®Œäº†

---

### Phase 4: Supabaseç§»è¡Œ ğŸ”œ
**çŠ¶æ…‹**: æœªç€æ‰‹ï¼ˆDBç’°å¢ƒæ§‹ç¯‰å¾Œï¼‰

#### 4.1 Prisma ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] Prismaã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- [ ] `schema.prisma`ä½œæˆï¼ˆ`db_design.md`å‚ç…§ï¼‰
- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆ`.env`ï¼‰
  ```
  DATABASE_URL="postgresql://user:password@host:port/database"
  USE_MOCK=false
  ```

#### 4.2 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] `npx prisma migrate dev --name init`
- [ ] ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ï¼ˆ`prisma/seed.ts`ï¼‰

#### 4.3 Prisma Repositoryå®Ÿè£…
- [ ] `PrismaMemberRepository.ts`
- [ ] `PrismaCompetitionRepository.ts`
- [ ] `PrismaRecordRepository.ts`
- [ ] `PrismaAdvisorRepository.ts`
- [ ] `PrismaActivityRepository.ts`

#### 4.4 Repositoryåˆ‡ã‚Šæ›¿ãˆ
- [ ] `config/dependencies.ts`ã®ã‚³ãƒ¡ãƒ³ãƒˆè§£é™¤
- [ ] Mock Repository â†’ Prisma Repositoryã«åˆ‡ã‚Šæ›¿ãˆ
- [ ] å‹•ä½œç¢ºèª

**ğŸ”§ åˆ‡ã‚Šæ›¿ãˆç®‡æ‰€:**
```typescript
// server/src/config/dependencies.ts

// ç¾åœ¨ï¼ˆMockä½¿ç”¨ï¼‰
const USE_MOCK = process.env.USE_MOCK === 'true';
if (USE_MOCK) {
  memberRepository = new MockMemberRepository();
}

// ç§»è¡Œå¾Œï¼ˆPrismaä½¿ç”¨ï¼‰
if (USE_MOCK) {
  memberRepository = new MockMemberRepository();
} else {
  const prisma = new PrismaClient();
  memberRepository = new PrismaMemberRepository(prisma);
}
```

#### 4.5 æ­´ä»£è¨˜éŒ²APIå®Ÿè£…
- [ ] Records Use Cases
  - `GetAllTimeRecordsUseCase.ts`
  - `GetPersonalRecordsUseCase.ts`
- [ ] RecordsControllerå®Ÿè£…
- [ ] records.routes.tså®Ÿè£…
- [ ] APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  ```
  GET /api/records/all-time?event=100m&gender=M  # æ­´ä»£è¨˜éŒ²
  GET /api/records/personal/:studentNumber       # å€‹äººè¨˜éŒ²ï¼ˆèªè¨¼å¿…è¦ï¼‰
  ```

#### 4.6 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Œæˆ
- [ ] é™¸ä¸Šéƒ¨æ­´ä»£è¨˜éŒ²ãƒšãƒ¼ã‚¸å®Ÿè£…
- [ ] å€‹äººã®æ­´ä»£è¨˜éŒ²ãƒšãƒ¼ã‚¸å®Ÿè£…ï¼ˆèªè¨¼æ©Ÿèƒ½å«ã‚€ï¼‰

#### æˆæœç‰©
- Supabaseé€£æºå®Œäº†
- å…¨æ©Ÿèƒ½å®Ÿè£…å®Œäº†

---

## ğŸš€ å‹•ä½œç¢ºèªæ‰‹é †

### Phase 1-3ï¼ˆç¾åœ¨ï¼‰

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
```bash
cd server
npm install
npm run dev
# â†’ http://localhost:3000
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•
```bash
cd front
npm install
npm run dev
# â†’ http://localhost:5173
```

#### APIç¢ºèª
```bash
curl http://localhost:3000/health
curl http://localhost:3000/api/members
curl http://localhost:3000/api/advisors
curl http://localhost:3000/api/competitions?year=2024
curl http://localhost:3000/api/activities
```

### Phase 4ï¼ˆDBç§»è¡Œå¾Œï¼‰

#### ç’°å¢ƒå¤‰æ•°å¤‰æ›´
```bash
# server/.env
USE_MOCK=false
DATABASE_URL=your_supabase_connection_string
```

#### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```bash
cd server
npx prisma migrate deploy
npx prisma db seed
```

#### å‹•ä½œç¢ºèª
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯å¤‰æ›´ä¸è¦
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å†èµ·å‹•ã®ã¿

---

## ğŸ“ ã‚³ãƒŸãƒƒãƒˆå±¥æ­´

- **Phase 0**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™å®Œäº†
- **Phase 1**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰å®Œäº†
- **Phase 2**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIå®Ÿè£…å®Œäº†
- **Phase 3**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…å®Œäº† âœ…

---

## ğŸ”„ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. DBç’°å¢ƒï¼ˆSupabaseï¼‰ã®æ§‹ç¯‰
2. Phase 4ã®é–‹å§‹
3. å…¨æ©Ÿèƒ½ã®å®Ÿè£…å®Œäº†
4. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
