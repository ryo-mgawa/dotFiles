# 豊田高専陸上部ホームページ 要件定義書

## 1. プロジェクト概要
豊田高専陸上部の公式ホームページを構築する。
部員情報、大会結果、記録管理を行い、部活動の活性化と情報発信を目的とする。

## 2. 機能要件

### 2.1 トップページ

#### 2.1.1 グローバルヘッダー
各ページへのナビゲーションを提供する。

**ナビゲーション項目:**
- 部員名簿
- 顧問名簿
- 大会結果
- 陸上部歴代記録
- 個人の歴代記録

#### 2.1.2 活動写真スライドショー
- **写真枚数:** 5枚
- **コンテンツ管理:** microCMSを使用
- **更新性:** 管理画面から簡単に写真を差し替え可能

#### 2.1.3 最新情報
- **表示内容:** X(旧Twitter)の埋め込み
- **目的:** 最新の活動情報をリアルタイムで発信

#### 2.1.4 活動時間
- **表示形式:** 表形式
- **表示内容:** 曜日別の練習時間

### 2.2 部員名簿ページ

#### 2.2.1 表示項目
- 学年
- 学科
- 名前
- 所属ブロック（短距離、中長距離、跳躍、投擲）

#### 2.2.2 ソート順
1. **第1優先:** 学年（5年 → 4年 → 3年 → 2年 → 1年）
2. **第2優先:** 学科（M科 → E科 → I科 → C科 → A科）
3. **第3優先:** 名前（五十音順）

### 2.3 顧問名簿ページ

#### 2.3.1 表示項目
- 名前

#### 2.3.2 表示対象
- 現職の顧問のみ表示（isActive=true）
- 五十音順に表示

### 2.4 大会結果ページ

#### 2.4.1 年度選択機能
- **UI:** プルダウン形式の年度選択フォーム
- **動作:** 年度選択により該当年度の大会一覧を表示

#### 2.4.2 大会一覧
- **表示順:** 新しい順（降順）
- **初期状態:** 大会名のみ表示（詳細は折りたたみ）
- **展開動作:** 大会名クリックで詳細を展開

#### 2.4.3 大会詳細情報
**表示項目:**
- 開催場所
- 開催日付
- 大会結果表（男子・女子で分離）

**結果表の項目:**
- 種目名
- 名前
- 学年
- 学科
- 記録
- 風速
- 備考

### 2.5 陸上部歴代記録ページ

#### 2.5.1 表示内容
- 各種目の上位10記録を表示
- 全大会結果から集計

#### 2.5.2 記録表の項目
- 順位
- 名前
- 学年
- 学科
- 記録
- 場所
- 日付

#### 2.5.3 種目一覧（想定）
**男子:**
- 短距離: 100m、200m、400m
- 中距離: 800m、1500m
- 長距離: 5000m、10000m
- ハードル: 110mH、400mH
- リレー: 4×100mR、4×400mR
- 跳躍: 走高跳、棒高跳、走幅跳、三段跳
- 投擲: 砲丸投、円盤投、ハンマー投、やり投

**女子:**
- 短距離: 100m、200m、400m
- 中距離: 800m、1500m
- 長距離: 3000m、5000m
- ハードル: 100mH、400mH
- リレー: 4×100mR、4×400mR
- 跳躍: 走高跳、棒高跳、走幅跳、三段跳
- 投擲: 砲丸投、円盤投、ハンマー投、やり投

### 2.6 個人の歴代記録ページ

#### 2.6.1 認証機能
- **入力項目:** 個人番号（学校発行）
- **目的:** 外部からの不正閲覧防止
- **認証方法:** 個人番号によるアクセス制御

#### 2.6.2 表示内容
- 入力された個人番号に対応する選手の全記録
- 種目別の記録推移
- ベスト記録

## 3. 非機能要件

### 3.1 技術スタック
詳細な技術仕様は`design.md`を参照してください。

#### 概要
- **フロントエンド**: React 19 + TypeScript
- **バックエンド**: Node.js + Express + TypeScript
- **データベース**: Supabase (PostgreSQL)
- **ORM**: Prisma 6.x
- **CMS**: microCMS（活動写真管理）

### 3.2 アーキテクチャ要件
- Clean Architectureの採用
- TDD（テスト駆動開発）の実践
- 保守性・可読性を重視した設計

詳細な設計方針とコーディング規約は`design.md`を参照してください。

### 3.3 品質要件

#### 3.3.1 可用性
- 通常時間帯での安定稼働
- エラー発生時の適切なエラーメッセージ表示

#### 3.3.2 レスポンシブ対応
- PC・タブレット・スマートフォンでの最適表示
- ブレークポイントの適切な設定

#### 3.3.3 データ整合性
- 記録データの正確性保証
- トランザクション管理の徹底

#### 3.3.4 将来拡張性
- ログイン機能の追加を考慮
- 新機能追加時の影響範囲を最小化
- モジュール間の疎結合化

### 3.4 セキュリティ要件
- 個人番号による認証（個人記録閲覧時）
- SQLインジェクション対策
- XSS対策
- CSRF対策
- 適切なCORS設定

## 4. データモデル
データベースの詳細設計は`db_design.md`を参照してください。

### 4.1 主要エンティティ概要
- **Members（部員）**: 部員の基本情報（氏名（漢字・ひらがな・ローマ字）、入学年度、学科、ブロックなど）
- **Competitions（大会）**: 大会情報（名称、場所、日付）
- **Records（記録）**: 競技記録（記録時の学年・学科を含む、リレー種目対応）
- **Advisors（顧問）**: 顧問情報
- **Activities（活動情報）**: 曜日別の練習時間

### 4.2 重要な設計ポイント
- 氏名は姓・名に分割し、漢字・ひらがな・ローマ字の各表記を管理
- 五十音順ソートにはひらがな表記を使用
- 学年は入学年度から動的に計算（`現在年度 - 入学年度 + 1`）
- 記録には記録時の学年・学科を保存（転科・卒業後も正確に追跡）
- リレー種目（4×100mR、4×400mR）に対応（4人分のレコードを作成）
- 論理削除により卒業生のデータも保持
- 外部キー制約によるデータ整合性の保証

## 5. 画面遷移図（概要）

```
トップページ
├── 部員名簿
├── 顧問名簿
├── 大会結果
│   └── 大会詳細（年度選択 → 大会選択）
├── 陸上部歴代記録
└── 個人の歴代記録（認証必須）
```

## 6. 開発環境

### 6.1 推奨環境
- Node.js: v20.x（LTS）またはv22.x以上
- TypeScript: v5.7以上
- パッケージマネージャー: npm/yarn/pnpm

開発ツールやその他の詳細設定は`design.md`を参照してください。

## 7. 納品物
- ソースコード（`front/`、`server/`）
- データベーススキーマ（Prismaマイグレーション）
- README.md（セットアップ手順）
- テストコード
- 設計ドキュメント（`design.md`、`db_design.md`）

## 8. 制約事項
- 個人情報保護法への準拠
- 学校のセキュリティポリシーへの準拠
- 個人番号の適切な管理

## 9. 今後の拡張可能性
- 管理者ログイン機能
- 記録データの一括インポート機能
- 記録のグラフ表示機能
- 練習メニュー管理機能
- 部員間のコミュニケーション機能
