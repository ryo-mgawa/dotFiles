# è±Šç”°é«˜å°‚é™¸ä¸Šéƒ¨ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ å®Ÿè£…è¨ˆç”»æ›¸

## ğŸ“‹ å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- **é–‹å§‹æ—¥**: 2025-12-04
- **ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º**: Phase 0 - æº–å‚™
- **é€²æ—**: 0%

---

## ğŸ¯ å®Ÿè£…æ–¹é‡

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç§»è¡Œæˆ¦ç•¥
ç¾åœ¨ã¯DBç’°å¢ƒãŒæ•´ã£ã¦ã„ãªã„ãŸã‚ã€ä»¥ä¸‹ã®æˆ¦ç•¥ã§å®Ÿè£…ã‚’é€²ã‚ã¾ã™ï¼š

1. **Phase 1-3**: ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªï¼‰ã§å®Ÿè£…ãƒ»å‹•ä½œç¢ºèª
2. **Phase 4**: Supabaseç§»è¡Œï¼ˆenvãƒ•ã‚¡ã‚¤ãƒ«ã§æ¥ç¶šæƒ…å ±ç®¡ç†ï¼‰

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³
- **Repository ãƒ‘ã‚¿ãƒ¼ãƒ³**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ã‚’æŠ½è±¡åŒ–ã—ã€ãƒ¢ãƒƒã‚¯â†’DBç§»è¡Œã‚’å®¹æ˜“ã«
- **Clean Architecture**: ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢ã«ã‚ˆã‚Šã€ã‚¤ãƒ³ãƒ•ãƒ©å±¤ã®å¤‰æ›´ãŒãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«å½±éŸ¿ã—ãªã„è¨­è¨ˆ

---

## ğŸ“… å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 0: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™ â³
**çŠ¶æ…‹**: é€²è¡Œä¸­

#### ã‚¿ã‚¹ã‚¯
- [ ] å®Ÿè£…è¨ˆç”»æ›¸ã®ä½œæˆï¼ˆæœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ä½œæˆï¼ˆfront/ã€server/ï¼‰
- [ ] .gitignoreã®è¨­å®š

#### æˆæœç‰©
- `implementation_plan.md`
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

---

### Phase 1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰ â¸ï¸
**çŠ¶æ…‹**: æœªç€æ‰‹

#### 1.1 ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] `server/package.json`ä½œæˆ
- [ ] TypeScriptè¨­å®šï¼ˆ`tsconfig.json`ï¼‰
- [ ] ESLintã€Prettierè¨­å®š
- [ ] å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  - express
  - typescript
  - @types/node, @types/express
  - cors, helmet
  - dotenv

#### 1.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
```
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ interface/          # Interface Layer
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ middlewares/
â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”œâ”€â”€ application/        # Application Layer
â”‚   â”‚   â”œâ”€â”€ usecases/
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”œâ”€â”€ domain/             # Domain Layer
â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ value-objects/
â”‚   â”‚   â””â”€â”€ repositories/   # Repository Interfaces
â”‚   â”œâ”€â”€ infrastructure/     # Infrastructure Layer
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â””â”€â”€ repositories/  # Mock Repositoryå®Ÿè£…
â”‚   â”‚   â””â”€â”€ mock/           # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ errors/
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”œâ”€â”€ config/
â”‚   â””â”€â”€ server.ts
â”œâ”€â”€ .env.example
â””â”€â”€ package.json
```

#### 1.3 ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿å®Ÿè£…
- [ ] ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿å®šç¾©ï¼ˆ`infrastructure/mock/data.ts`ï¼‰
  - Membersï¼ˆéƒ¨å“¡ï¼‰ãƒ‡ãƒ¼ã‚¿
  - Competitionsï¼ˆå¤§ä¼šï¼‰ãƒ‡ãƒ¼ã‚¿
  - Recordsï¼ˆè¨˜éŒ²ï¼‰ãƒ‡ãƒ¼ã‚¿
  - Advisorsï¼ˆé¡§å•ï¼‰ãƒ‡ãƒ¼ã‚¿
  - Activitiesï¼ˆæ´»å‹•æƒ…å ±ï¼‰ãƒ‡ãƒ¼ã‚¿

#### 1.4 Repositoryå®Ÿè£…
- [ ] Repository Interfaceå®šç¾©ï¼ˆ`domain/repositories/`ï¼‰
- [ ] Mock Repositoryå®Ÿè£…ï¼ˆ`infrastructure/database/repositories/`ï¼‰
  - `MockMemberRepository.ts`
  - `MockCompetitionRepository.ts`
  - `MockRecordRepository.ts`
  - `MockAdvisorRepository.ts`
  - `MockActivityRepository.ts`

**ğŸ”§ DBç§»è¡Œæ™‚ã®å¤‰æ›´ç‚¹:**
```typescript
// ç¾åœ¨ï¼ˆMockï¼‰
import { MockMemberRepository } from '@/infrastructure/database/repositories/MockMemberRepository';
const memberRepository = new MockMemberRepository();

// ç§»è¡Œå¾Œï¼ˆPrismaï¼‰
import { PrismaMemberRepository } from '@/infrastructure/database/repositories/PrismaMemberRepository';
const memberRepository = new PrismaMemberRepository(prisma);
```

#### æˆæœç‰©
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤
- ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¨Mock Repository

---

### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIå®Ÿè£… â¸ï¸
**çŠ¶æ…‹**: æœªç€æ‰‹

#### 2.1 Domain Layer
- [ ] Entityã‚¯ãƒ©ã‚¹å®Ÿè£…
  - `Member.ts`
  - `Competition.ts`
  - `Record.ts`
  - `Advisor.ts`
- [ ] Value Objectã‚¯ãƒ©ã‚¹å®Ÿè£…
  - `Department.ts`
  - `Block.ts`
  - `Grade.ts`

#### 2.2 Application Layerï¼ˆUse Casesï¼‰
- [ ] Members Use Cases
  - `GetMemberListUseCase.ts`
  - `GetMemberByIdUseCase.ts`
- [ ] Competitions Use Cases
  - `GetCompetitionsByYearUseCase.ts`
  - `GetCompetitionDetailUseCase.ts`
- [ ] Records Use Cases
  - `GetAllTimeRecordsUseCase.ts`
  - `GetPersonalRecordsUseCase.ts`
- [ ] Advisors Use Cases
  - `GetAdvisorListUseCase.ts`
- [ ] Activities Use Cases
  - `GetActivitiesUseCase.ts`

#### 2.3 Interface Layerï¼ˆControllers & Routesï¼‰
- [ ] Controllerså®Ÿè£…
  - `MembersController.ts`
  - `CompetitionsController.ts`
  - `RecordsController.ts`
  - `AdvisorsController.ts`
  - `ActivitiesController.ts`
- [ ] Routeså®Ÿè£…
  - `members.routes.ts`
  - `competitions.routes.ts`
  - `records.routes.ts`
  - `advisors.routes.ts`
  - `activities.routes.ts`
- [ ] Middlewareså®Ÿè£…
  - `errorHandler.ts`
  - `cors.ts`

#### 2.4 APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```
GET  /api/members              # åœ¨ç±ä¸­ã®éƒ¨å“¡ä¸€è¦§
GET  /api/members/:id          # éƒ¨å“¡è©³ç´°
GET  /api/advisors             # ç¾è·é¡§å•ä¸€è¦§
GET  /api/competitions         # å¤§ä¼šä¸€è¦§ï¼ˆ?year=2024ã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½ï¼‰
GET  /api/competitions/:id     # å¤§ä¼šè©³ç´°
GET  /api/records/all-time     # æ­´ä»£è¨˜éŒ²ï¼ˆ?event=100m&gender=Mã§ãƒ•ã‚£ãƒ«ã‚¿ï¼‰
GET  /api/records/personal/:studentNumber  # å€‹äººè¨˜éŒ²
GET  /api/activities           # æ´»å‹•æ™‚é–“
```

#### æˆæœç‰©
- REST APIï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ï¼‰

---

### Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… â¸ï¸
**çŠ¶æ…‹**: æœªç€æ‰‹

#### 3.1 ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] Vite + React + TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [ ] å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  - react-router-dom
  - react-bootstrap
  - axios
  - react-big-calendarï¼ˆæ´»å‹•äºˆå®šç”¨ï¼‰

#### 3.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
```
front/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ members/
â”‚   â”‚   â”œâ”€â”€ advisors/
â”‚   â”‚   â”œâ”€â”€ competitions/
â”‚   â”‚   â”œâ”€â”€ records/
â”‚   â”‚   â””â”€â”€ home/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx
â”‚   â”‚   â”œâ”€â”€ MembersPage.tsx
â”‚   â”‚   â”œâ”€â”€ AdvisorsPage.tsx
â”‚   â”‚   â”œâ”€â”€ CompetitionsPage.tsx
â”‚   â”‚   â”œâ”€â”€ AllTimeRecordsPage.tsx
â”‚   â”‚   â””â”€â”€ PersonalRecordsPage.tsx
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ constants/
â”‚   â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â””â”€â”€ main.tsx
â”œâ”€â”€ .env.example
â””â”€â”€ package.json
```

#### 3.3 å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] `Header.tsx` - ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼
- [ ] `Footer.tsx` - ãƒ•ãƒƒã‚¿ãƒ¼
- [ ] `LoadingSpinner.tsx` - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
- [ ] `ErrorMessage.tsx` - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

#### 3.4 APIé€šä¿¡è¨­å®š
- [ ] `apiClient.ts` - Axiosè¨­å®š
- [ ] å„APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…
  - `membersApi.ts`
  - `competitionsApi.ts`
  - `recordsApi.ts`
  - `advisorsApi.ts`
  - `activitiesApi.ts`

**ğŸ”§ DBç§»è¡Œæ™‚ã®å¤‰æ›´ç‚¹:**
```typescript
// .envãƒ•ã‚¡ã‚¤ãƒ«ã§APIãƒ™ãƒ¼ã‚¹URLã‚’ç®¡ç†
// é–‹ç™ºæ™‚
VITE_API_BASE_URL=http://localhost:3000/api

// æœ¬ç•ªæ™‚ï¼ˆDBç§»è¡Œå¾Œã‚‚å¤‰æ›´ä¸è¦ï¼‰
VITE_API_BASE_URL=https://your-domain.com/api
```

#### 3.5 ãƒšãƒ¼ã‚¸å®Ÿè£…
- [ ] ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
  - æ´»å‹•å†™çœŸã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ï¼ˆä»®ç”»åƒï¼‰
  - TwitteråŸ‹ã‚è¾¼ã¿
  - æ´»å‹•æ™‚é–“è¡¨
- [ ] éƒ¨å“¡åç°¿ãƒšãƒ¼ã‚¸
  - éƒ¨å“¡ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«
  - ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] é¡§å•åç°¿ãƒšãƒ¼ã‚¸
  - é¡§å•ä¸€è¦§
- [ ] å¤§ä¼šçµæœãƒšãƒ¼ã‚¸
  - å¹´åº¦é¸æŠãƒ•ã‚©ãƒ¼ãƒ 
  - å¤§ä¼šä¸€è¦§ï¼ˆæŠ˜ã‚ŠãŸãŸã¿ï¼‰
- [ ] é™¸ä¸Šéƒ¨æ­´ä»£è¨˜éŒ²ãƒšãƒ¼ã‚¸
  - ç¨®ç›®åˆ¥æ­´ä»£è¨˜éŒ²è¡¨
- [ ] å€‹äººã®æ­´ä»£è¨˜éŒ²ãƒšãƒ¼ã‚¸
  - å€‹äººç•ªå·å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
  - å€‹äººè¨˜éŒ²è¡¨ç¤º

#### æˆæœç‰©
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ¢ãƒƒã‚¯APIä½¿ç”¨ï¼‰

---

### Phase 4: Supabaseç§»è¡Œ â¸ï¸
**çŠ¶æ…‹**: æœªç€æ‰‹ï¼ˆDBç’°å¢ƒæ§‹ç¯‰å¾Œï¼‰

#### 4.1 Prisma ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] Prismaã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- [ ] `schema.prisma`ä½œæˆï¼ˆ`db_design.md`å‚ç…§ï¼‰
- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆ`.env`ï¼‰
  ```
  DATABASE_URL="postgresql://user:password@host:port/database"
  ```

#### 4.2 Prisma Repositoryå®Ÿè£…
- [ ] `PrismaMemberRepository.ts`
- [ ] `PrismaCompetitionRepository.ts`
- [ ] `PrismaRecordRepository.ts`
- [ ] `PrismaAdvisorRepository.ts`
- [ ] `PrismaActivityRepository.ts`

#### 4.3 Repositoryåˆ‡ã‚Šæ›¿ãˆ
- [ ] DIï¼ˆä¾å­˜æ€§æ³¨å…¥ï¼‰è¨­å®šã‚’å¤‰æ›´
- [ ] Mock Repository â†’ Prisma Repositoryã«åˆ‡ã‚Šæ›¿ãˆ

**ğŸ”§ åˆ‡ã‚Šæ›¿ãˆç®‡æ‰€:**
```typescript
// server/src/config/dependencies.ts

// ç¾åœ¨ï¼ˆMockä½¿ç”¨ï¼‰
import { MockMemberRepository } from '@/infrastructure/database/repositories/MockMemberRepository';
export const memberRepository = new MockMemberRepository();

// ç§»è¡Œå¾Œï¼ˆPrismaä½¿ç”¨ï¼‰
import { PrismaMemberRepository } from '@/infrastructure/database/repositories/PrismaMemberRepository';
import { PrismaClient } from '@prisma/client';
const prisma = new PrismaClient();
export const memberRepository = new PrismaMemberRepository(prisma);
```

#### 4.4 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] `prisma migrate dev --name init`
- [ ] ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥

#### 4.5 å‹•ä½œç¢ºèª
- [ ] å…¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å‹•ä½œç¢ºèª
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®å‹•ä½œç¢ºèª

#### æˆæœç‰©
- Supabaseé€£æºå®Œäº†

---

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React 19** + **TypeScript 5.7+**
- **Vite** - ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«
- **React Router v7** - ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- **React Bootstrap 2.x** - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **Axios** - HTTPé€šä¿¡

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Node.js v20/v22** + **TypeScript 5.7+**
- **Express** - Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Prisma 6.x** - ORMï¼ˆPhase 4ã§å°å…¥ï¼‰
- **Supabase (PostgreSQL)** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆPhase 4ã§æ¥ç¶šï¼‰

---

## ğŸ“ æœ€çµ‚çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
NittcTrackAndFieldHP/
â”œâ”€â”€ front/                          # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ server/                         # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ interface/              # Controllers, Routes
â”‚   â”‚   â”œâ”€â”€ application/            # Use Cases
â”‚   â”‚   â”œâ”€â”€ domain/                 # Entities, Repositories
â”‚   â”‚   â”œâ”€â”€ infrastructure/         # Mock/Prisma Repositories
â”‚   â”‚   â”œâ”€â”€ shared/                 # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ server.ts
â”‚   â”œâ”€â”€ prisma/                     # Phase 4ã§è¿½åŠ 
â”‚   â”‚   â”œâ”€â”€ schema.prisma
â”‚   â”‚   â””â”€â”€ seed.ts
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ docs/                           # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ requirements.md
â”‚   â”œâ”€â”€ db_design.md
â”‚   â””â”€â”€ design.md
â”‚
â”œâ”€â”€ implementation_plan.md          # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ README.md
```

---

## ğŸ”„ ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰DBç§»è¡Œã®è©³ç´°

### ç¾åœ¨ã®å®Ÿè£…ï¼ˆPhase 1-3ï¼‰

#### Repository Interface
```typescript
// domain/repositories/IMemberRepository.ts
export interface IMemberRepository {
  findAllActive(): Promise<Member[]>;
  findById(id: string): Promise<Member | null>;
  // ...
}
```

#### Mock Repository
```typescript
// infrastructure/database/repositories/MockMemberRepository.ts
import { IMemberRepository } from '@/domain/repositories/IMemberRepository';
import { mockMembers } from '@/infrastructure/mock/data';

export class MockMemberRepository implements IMemberRepository {
  async findAllActive(): Promise<Member[]> {
    return mockMembers.filter(m => m.isActive);
  }

  async findById(id: string): Promise<Member | null> {
    return mockMembers.find(m => m.id === id) || null;
  }
}
```

### DBç§»è¡Œå¾Œã®å®Ÿè£…ï¼ˆPhase 4ï¼‰

#### Prisma Repository
```typescript
// infrastructure/database/repositories/PrismaMemberRepository.ts
import { IMemberRepository } from '@/domain/repositories/IMemberRepository';
import { PrismaClient } from '@prisma/client';

export class PrismaMemberRepository implements IMemberRepository {
  constructor(private prisma: PrismaClient) {}

  async findAllActive(): Promise<Member[]> {
    const members = await this.prisma.member.findMany({
      where: { isActive: true }
    });
    return members.map(this.toDomain);
  }

  async findById(id: string): Promise<Member | null> {
    const member = await this.prisma.member.findUnique({
      where: { id }
    });
    return member ? this.toDomain(member) : null;
  }

  private toDomain(record: any): Member {
    return new Member(/* ... */);
  }
}
```

#### DIè¨­å®šã®å¤‰æ›´ç®‡æ‰€
```typescript
// config/dependencies.ts

// ğŸ”§ ã“ã“ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§DBåˆ‡ã‚Šæ›¿ãˆå®Œäº†
const USE_MOCK = process.env.USE_MOCK === 'true'; // Phase 1-3: true, Phase 4: false

let memberRepository: IMemberRepository;

if (USE_MOCK) {
  // Mockä½¿ç”¨
  const { MockMemberRepository } = await import('@/infrastructure/database/repositories/MockMemberRepository');
  memberRepository = new MockMemberRepository();
} else {
  // Prismaä½¿ç”¨
  const { PrismaMemberRepository } = await import('@/infrastructure/database/repositories/PrismaMemberRepository');
  const { PrismaClient } = await import('@prisma/client');
  const prisma = new PrismaClient();
  memberRepository = new PrismaMemberRepository(prisma);
}

export { memberRepository };
```

---

## âœ… å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 0: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™
- [ ] å®Ÿè£…è¨ˆç”»æ›¸ä½œæˆ
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
- [ ] .gitignoreè¨­å®š

### Phase 1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰
- [ ] ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
- [ ] ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿å®Ÿè£…
- [ ] Mock Repositoryå®Ÿè£…

### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIå®Ÿè£…
- [ ] Domain Layerå®Ÿè£…
- [ ] Application Layerå®Ÿè£…
- [ ] Interface Layerå®Ÿè£…
- [ ] å…¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‹•ä½œç¢ºèª

### Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…
- [ ] ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
- [ ] å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] APIé€šä¿¡è¨­å®š
- [ ] å…¨ãƒšãƒ¼ã‚¸å®Ÿè£…
- [ ] å‹•ä½œç¢ºèª

### Phase 4: Supabaseç§»è¡Œ
- [ ] Prismaã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] Prisma Repositoryå®Ÿè£…
- [ ] Repositoryåˆ‡ã‚Šæ›¿ãˆ
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] å‹•ä½œç¢ºèª

---

## ğŸ“ å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒ•ã‚§ãƒ¼ã‚º | å¤‰æ›´å†…å®¹ |
|------|---------|----------|
| 2025-12-04 | Phase 0 | å®Ÿè£…è¨ˆç”»æ›¸ä½œæˆ |

---

## ğŸš€ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. **Phase 0å®Œäº†**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
2. **Phase 1é–‹å§‹**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰
